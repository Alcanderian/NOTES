# 近期C++掉坑

2019.07.05

## 不要使用全局类

构造和析构顺序不确定，应该使用单例模式代替。

## decltype __typeof auto

可以缩短我们的代码长度。

## memset(this, 0, sizeof(*this))

当类成员有对象和STL容器的时候，慎用。

## strtok

会破坏字符串，小心使用，必要时先复制一份字符串。

## alloca

在栈上分配内存，太大会爆栈，使用时必须要保证内存大小不会超过某个值。

可以试试用RAII技术，比如unique_ptr。

## RAII

用处很多，利用对象的声明周期来管理变量，比如锁、堆内存的管理。这样做可以节省很多代码而且不容易出错。

注意：当使用new\[\]时，unique_ptr<T>的T应该改为T\[\]，这样在delete的时候才会用delete[]。
